{
  "schema": "pi.ext.conformance_baseline.v2",
  "generated_at": "2026-02-07T23:31:53Z",
  "git_ref": "33465815",
  "extension_conformance": {
    "manifest_count": 223,
    "tested": 223,
    "passed": 187,
    "failed": 36,
    "pass_rate_pct": 83.9,
    "by_tier": {
      "1": { "pass": 38, "fail": 0, "total": 38, "rate_pct": 100.0 },
      "2": { "pass": 85, "fail": 2, "total": 87, "rate_pct": 97.7 },
      "3": { "pass": 60, "fail": 30, "total": 90, "rate_pct": 66.7 },
      "4": { "pass": 2, "fail": 1, "total": 3, "rate_pct": 66.7 },
      "5": { "pass": 2, "fail": 3, "total": 5, "rate_pct": 40.0 }
    },
    "by_source": {
      "official-pi-mono": { "pass": 60, "fail": 1, "total": 61, "rate_pct": 98.4, "note": "1 failure is base_fixtures (test fixture)" },
      "community": { "pass": 52, "fail": 6, "total": 58, "rate_pct": 89.7 },
      "npm-registry": { "pass": 48, "fail": 27, "total": 75, "rate_pct": 64.0 },
      "third-party-github": { "pass": 16, "fail": 7, "total": 23, "rate_pct": 69.6 },
      "agents": { "pass": 0, "fail": 1, "total": 1, "rate_pct": 0.0 }
    }
  },
  "scenario_conformance": {
    "total": 25,
    "passed": 22,
    "failed": 3,
    "pass_rate_pct": 88.0,
    "failures": [
      {
        "id": "scn-antigravity-image-gen-002",
        "extension": "antigravity-image-gen",
        "cause": "vcr_stub_gap",
        "detail": "Synthetic HTTP stub doesn't produce parseable SSE image data"
      },
      {
        "id": "scn-status-line-001",
        "extension": "status-line",
        "cause": "mock_gap",
        "detail": "UI status updates not captured in multi-step event lifecycle"
      },
      {
        "id": "scn-git-checkpoint-001",
        "extension": "git-checkpoint",
        "cause": "mock_gap",
        "detail": "UI notify + exec mock not firing in multi-step restore flow"
      }
    ]
  },
  "failure_classification": {
    "manifest_mismatch": {
      "count": 22,
      "description": "Extension loads but registers different commands/tools than manifest expects.",
      "extensions": [
        "agents-mikeastock/extensions",
        "community/prateekmedia-lsp",
        "npm/aliou-pi-linkup",
        "npm/aliou-pi-synthetic",
        "npm/lsp-pi",
        "npm/marckrenn-pi-sub-bar",
        "npm/mitsupi",
        "npm/pi-amplike",
        "npm/pi-bash-confirm",
        "npm/pi-extensions",
        "npm/pi-package-test",
        "npm/shitty-extensions",
        "npm/tmustier-pi-arcade",
        "npm/vaayne-agent-kit",
        "third-party/aliou-pi-extensions",
        "third-party/ben-vargas-pi-packages",
        "third-party/charles-cooper-pi-extensions",
        "third-party/kcosr-pi-extensions",
        "third-party/marckrenn-pi-sub",
        "third-party/openclaw-openclaw",
        "third-party/pasky-pi-amplike",
        "third-party/w-winter-dot314"
      ]
    },
    "missing_npm_package": {
      "count": 5,
      "description": "Extension requires an npm package not available as a virtual module stub.",
      "extensions": [
        "npm/pi-search-agent",
        "npm/pi-wakatime",
        "npm/pi-web-access",
        "npm/qualisero-pi-agent-scip",
        "third-party/qualisero-pi-agent-scip"
      ],
      "missing_packages": ["openai", "adm-zip", "linkedom", "@sourcegraph/scip-typescript"]
    },
    "multi_file_dependency": {
      "count": 4,
      "description": "Extension uses relative imports to unbundled sibling/parent modules.",
      "extensions": [
        "community/qualisero-background-notify",
        "community/qualisero-pi-agent-scip",
        "community/qualisero-safe-git",
        "npm/aliou-pi-processes"
      ]
    },
    "runtime_error": {
      "count": 4,
      "description": "Extension crashes during initialization (missing data, broken API, FS dependency).",
      "extensions": [
        "community/nicobailon-interview-tool",
        "npm/aliou-pi-guardrails",
        "npm/aliou-pi-toolchain",
        "npm/marckrenn-pi-sub-core"
      ]
    },
    "test_fixture": {
      "count": 1,
      "description": "Not a real extension; test-only fixture in manifest.",
      "extensions": ["base_fixtures"]
    },
    "mock_gap": {
      "count": 2,
      "description": "Scenario mock infrastructure doesn't fully support the extension's hostcall pattern.",
      "scenarios": ["scn-status-line-001", "scn-git-checkpoint-001"]
    },
    "vcr_stub_gap": {
      "count": 1,
      "description": "VCR/stub HTTP mock doesn't produce valid response for extension parser.",
      "scenarios": ["scn-antigravity-image-gen-002"]
    }
  },
  "actionable_improvements": [
    {
      "category": "manifest_mismatch",
      "action": "Audit manifests for 22 extensions where expected registrations don't match actual.",
      "impact": "Would improve ext pass rate from 83.9% to 93.7%"
    },
    {
      "category": "missing_npm_package",
      "action": "Add virtual module stubs for openai, adm-zip, linkedom, @sourcegraph/scip-typescript",
      "impact": "Would fix 5 extensions"
    },
    {
      "category": "multi_file_dependency",
      "action": "Bundle multi-file extensions or add relative path resolution",
      "impact": "Would fix 4 extensions"
    },
    {
      "category": "runtime_error",
      "action": "Investigate 4 extensions with runtime errors",
      "impact": "Would fix 4 extensions"
    },
    {
      "category": "mock_gap",
      "action": "Enhance MockSpecInterceptor UI status capture and exec log wiring for multi-step scenarios",
      "impact": "Would fix 2 scenario failures (status-line, git-checkpoint)"
    },
    {
      "category": "vcr_stub_gap",
      "action": "Improve synthetic HTTP response for antigravity-image-gen SSE stream",
      "impact": "Would fix 1 scenario failure"
    }
  ],
  "regression_thresholds": {
    "tier1_pass_rate_min_pct": 100.0,
    "tier2_pass_rate_min_pct": 95.0,
    "overall_pass_rate_min_pct": 80.0,
    "scenario_pass_rate_min_pct": 85.0,
    "max_new_failures": 3
  },
  "inventory_ref": "tests/ext_conformance/reports/inventory.json",
  "report_refs": {
    "extension_report": "tests/ext_conformance/reports/conformance/conformance_report.json",
    "extension_events": "tests/ext_conformance/reports/conformance/conformance_events.jsonl",
    "scenario_report": "tests/ext_conformance/reports/scenario_conformance.json",
    "scenario_events": "tests/ext_conformance/reports/scenario_conformance.jsonl",
    "triage": "tests/ext_conformance/reports/smoke_triage.json"
  }
}
